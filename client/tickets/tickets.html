<template name="tickets">
  <div class="panel tickets">
    {{#each ticket}}
      <div class="ticket {{type}} {{size}} {{status}} {{selected}}">
        {{#if editing}}
          {{> editTicket}}
        {{else}}
          {{#if ticketMenu}}
            <ul class="ticket-menu">
              <li><a href="#" class="ticket-menu-item ticket-edit icon-edit">Edit {{type}}</a></li>
              <li><a href="#" class="ticket-menu-item ticket-delete icon-trash">Delete {{type}}</a></li>
            </ul>
            <a class="close icon-close"></a>
          {{else}}
            <h3 class="ticket-title">#{{title}}</h3>
            <p class="ticket-description">{{description}}</p>
            <div class="ticket-meta">
              <div class="media">
                <div class="media-image"></div>
                <div class="media-body">
                  <small><b>2 people chatting</b></small>
                  <small>{{status}}</small>
                </div>
              </div>
            </div>
            <a class="ticket-menu-toggle icon-settings"></a>
          {{/if}}
        {{/if}}
      </div>
    {{/each}}
  </div>
</template>

<template name="editTicket">
  <a class="close icon-close"></a>
  <select id="edit_ticket_type">
    <option value="story">Story</option>
    <option value="defect">Defect</option>
    <option value="task">Task</option>
  </select>
  <select id="edit_ticket_size">
    <option value="small">Small</option>
    <option value="medium">Medium</option>
    <option value="large">Large</option>
  </select>
  <select id="edit_ticket_status">
    <option value="someday">Someday</option>
    <option value="backlog">Backlog</option>
    <option value="current">Current</option>
    <option value="done">Done</option>
  </select>
  <textarea id="edit_ticket_title">{{title}}</textarea>
  <button id="edit_ticket" class="button-knockout">Save {{type}}</button>
</template>

<template name="ticketsHeader">
  <header class="tickets-header">
    <div class="filters">
      Showing
      <select class="filter">
        <option value="*">all items</option>
        <option value=".story">Stories</option>
        <option value=".defect">Defects</option>
        <option value=".task">Tasks</option>
      </select>
      with
      <select class="filter">
        <option value="*">any status</option>
        <option value=".someday">Someday</option>
        <option value=".backlog">Backlog</option>
        <option value=".current">Current</option>
        <option value=".done">Done</option>
      </select>
      and
      <select class="filter">
        <option value="*" selected>any size</option>
        <option value=".small">Small</option>
        <option value=".medium">Medium</option>
        <option value=".large">Large</option>
      </select>
      assigned to
      <select class="filter">
        <option value="*" selected>anyone</option>
      </select>
    </div>
    <button data-modal-template="ticketNew">New ticket</button>
    {{> loginButtons align="right"}}
  </header>
</template>

<template name="ticketNew">
  <div class="ticket-new">
    <p>
      <select id="new_ticket_type">
        <option value="story">Story</option>
        <option value="defect">Defect</option>
        <option value="task">Task</option>
      </select>
      <select id="new_ticket_size">
        <option value="small">Small</option>
        <option value="medium">Medium</option>
        <option value="large">Large</option>
      </select>
      <select id="new_ticket_status">
        <option value="someday" selected>Someday</option>
        <option value="backlog">Backlog</option>
        <option value="current">Current</option>
      </select>
    </p>
    <input type="text" id="new_ticket_title" placeholder="Add a short ticket title">
    <textarea id="new_ticket_description" placeholder="Describe this ticket"></textarea>
    <button id="add_ticket" class="button-knockout" data-modal="close">Create</button>
  </div>
</template>
